!function(){"use strict";angular.module("app",["ui.router","ngAnimate","ui.bootstrap"]),angular.module("app").config(["$stateProvider","$urlRouterProvider","$compileProvider",function(t,e,o){o.debugInfoEnabled(!1),e.otherwise("/hotels"),t.state("hotels",{abstract:!0,url:"/hotels",template:"<ui-view/>"}).state("hotels.list",{url:"",templateUrl:"./app/modules/hotels/hotels.html",controller:"hotelsController"}).state("hotels.edit",{url:"/hotel-edit/:id",templateUrl:"./app/modules/hotels/hotel-edit.html",controller:"hotelsController"}).state("hotels.rooms",{url:"/hotel-rooms/:id",templateUrl:"./app/modules/hotels/hotel-rooms.html",controller:"hotelsController"}).state("hotels.create",{url:"/add-hotel",templateUrl:"./app/modules/hotels/add-hotel.html",controller:"hotelsController"}).state("hotel-preview",{url:"/hotel-preview/:id",templateUrl:"./app/modules/hotels/hotel-preview.html",controller:"hotelsController"})}])}(),angular.module("app").filter("brandFilter",function(){return function(t,e){var o=[];return"undefined"==typeof e&&"undefined"!=t?t:t&&e?"All"==e?t:(t.filter(function(t){t.details.brand.txt===e&&o.push(t)}),o):void 0}}),function(){"use strict";angular.module("app").filter("startFrom",function(){return function(t,e){if(t)return e=+e,t.slice(e)}})}(),angular.module("app").factory("managerService",["$http","$q",function(t,e){var o={};return this.service={},o.getHotels=function(){if(o.hotels){var l=e.defer();return l.resolve(o.hotels),l.promise}return t.get("./json/hotels.json").then(function(t){return o.hotels=t.data,o.hotels})},o.update=function(t){o.hotels.forEach(function(e){e._id==t._id&&(e=t)});var l=e.defer();return l.resolve(o.hotels),l.promise},o.delete=function(t){var l=o.hotels.indexOf(t);o.hotels.splice(l,1);var n=e.defer();return n.resolve(o.hotels),n.promise},o.reload=function(){return t.get("./json/hotels.json").then(function(t){return o.hotels=t.data,o.hotels})},o}]),angular.module("app").controller("hotelsController",["$scope","$http","$location","managerService","$stateParams","$state","$uibModal","$rootScope",function(t,e,o,l,n,r,i,s){t.filterName="",t.hotelsJSON=[],t.brandsJSON=[],t.pageSize=5,t.currentPage=1,s.brandF,t.init=function(){l.getHotels().then(function(e){t.hotels=e})},e.get("./json/brands.json").then(function(e){t.brandsJSON=e.data}),t.filterBrands=function(e){t.currentPage=1,s.brandF=e},t.Add=function(o){e.post("http://localhost:4730/addhotel",{newHotel:o}).then(function(e){l.reload().then(function(e){t.hotels=e.data})},function(t){console.log(t.data)})},t.getRooms=function(){t.hotelToShow=l.getHotel()},t.getHotel=function(){var e=n.id;l.getHotels().then(function(o){t.hotels=o,t.hotels.forEach(function(o){o._id==e&&(t.hotel=o)})})},t.edit=function(){l.update(t.hotel).then(function(e){t.hotels=e,r.go("hotels.list")})},t.removeHotel=function(){var e=i.open({animation:!0,templateUrl:"app/modules/hotels/modal/confirm.html",controller:"confirmCtrl",size:"md"});e.result.then(function(e){e&&l.delete(t.hotel).then(function(e){t.hotels=e,r.go("hotels.list")})})},t.delete=function(e){var o=i.open({animation:!0,templateUrl:"app/modules/hotels/modal/confirm.html",controller:"confirmCtrl",size:"md"});o.result.then(function(o){o&&l.delete(e).then(function(e){t.hotels=e,r.go("hotels.list")})})}}]),angular.module("app").controller("confirmCtrl",["$scope","$modalInstance",function(t,e){t.ok=function(){e.close(!0)},t.cancel=function(){e.dismiss("cancel")}}]),function(){"use strict";angular.module("app").directive("brandBox",function(){return{restrict:"EA",templateUrl:"./app/modules/hotels/directives/brands/brands-directive.html",scope:{brandItem:"=",filterBrands:"&"}}})}(),function(){"use strict";angular.module("app").directive("hotelBox",["$uibModal","$http","$log","$location","$state",function(t,e,o,l,n){return{restrict:"EA",templateUrl:"./app/modules/hotels/directives/hotel-box/hotel-directive.html",scope:{hotelOwn:"=",moveToPageDetails:"&",delete:"&"},link:function(t,o,l){t.animationsEnabled=!0,e.get("./json/hotels.json").then(function(e){t.hotelsJSON=e.data}),t.moveToPageDetails=function(){n.go("hotel-preview",{id:t.hotelOwn._id})}}}}])}();